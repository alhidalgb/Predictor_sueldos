{% extends "base.html" %}

{% block title %}Formulario - PredicciÃ³n Salarial{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-12 max-w-3xl">
    <!-- Progress Bar -->
    <div class="mb-8">
        <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-semibold" data-i18n="form.step">Paso</span>
            <span class="text-sm text-gray-600">
                <span id="currentStep">1</span> <span data-i18n="form.of">de</span> 2
            </span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2">
            <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 50%"></div>
        </div>
    </div>
    
    <!-- Form Container -->
    <div class="bg-white rounded-xl shadow-lg p-8">
        <form id="predictionForm" data-form-id="{{ form_id }}">
            
            <!-- Step 1: Datos Personales -->
            <div id="step1" class="step-content">
                <h2 class="text-2xl font-bold mb-6" data-i18n="form.personal.title">Datos Personales</h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.personal.name">
                            Nombre (Opcional)
                        </label>
                        <input type="text" name="nombre" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.personal.age">
                            Edad *
                        </label>
                        <input type="number" name="edad" min="18" max="100" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <span class="text-red-500 text-xs hidden error-msg" data-i18n="form.required">Este campo es obligatorio</span>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.personal.country">
                            PaÃ­s *
                        </label>
                        <select name="pais" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="" data-i18n="form.select">Selecciona...</option>
                            <option value="Brasil" data-i18n="country.brasil">ðŸ‡§ðŸ‡· Brasil</option>
                            <option value="China" data-i18n="country.china">ðŸ‡¨ðŸ‡³ China</option>
                            <option value="EspaÃ±a" data-i18n="country.espana">ðŸ‡ªðŸ‡¸ EspaÃ±a</option>
                            <option value="PakistÃ¡n" data-i18n="country.pakistan">ðŸ‡µðŸ‡° PakistÃ¡n</option>
                            <option value="USA" data-i18n="country.usa">ðŸ‡ºðŸ‡¸ USA</option>
                            <option value="India" data-i18n="country.india">ðŸ‡®ðŸ‡³ India</option>
                            <option value="Vietnam" data-i18n="country.vietnam">ðŸ‡»ðŸ‡³ Vietnam</option>
                            <option value="Nigeria" data-i18n="country.nigeria">ðŸ‡³ðŸ‡¬ Nigeria</option>
                        </select>
                        <span class="text-red-500 text-xs hidden error-msg" data-i18n="form.required">Este campo es obligatorio</span>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.personal.gender">
                            GÃ©nero *
                        </label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="radio" name="genero" value="Hombre" required class="mr-2">
                                <span data-i18n="form.personal.gender.male">Hombre</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="genero" value="Mujer" required class="mr-2">
                                <span data-i18n="form.personal.gender.female">Mujer</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="genero" value="Otro" required class="mr-2">
                                <span data-i18n="form.personal.gender.other">Otro</span>
                            </label>
                        </div>
                        <span class="text-red-500 text-xs hidden error-msg" data-i18n="form.required">Este campo es obligatorio</span>
                    </div>
                </div>
                
                <div class="flex justify-end mt-6">
                    <button type="button" onclick="nextStep()" 
                            class="bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                        <span data-i18n="form.next">Siguiente</span>
                    </button>
                </div>
            </div>
            
            <!-- Step 2: Datos de FormaciÃ³n -->
            <div id="step2" class="step-content hidden">
                <h2 class="text-2xl font-bold mb-6" data-i18n="form.education.title">Datos de FormaciÃ³n</h2>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.education.degree">TitulaciÃ³n *</label>
                        <select name="titulacion" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="" data-i18n="form.select">Selecciona...</option>
                            <option value="Grado" data-i18n="degree.bachelor">Grado</option>
                            <option value="Master" data-i18n="degree.master">Master</option>
                            <option value="PHD" data-i18n="degree.phd">PHD</option>
                            <option value="FP" data-i18n="degree.fp">FP</option>
                        </select>
                    </div>


                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.education.field">Campo de estudio *</label>
                        <select name="campoEstudio" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="" data-i18n="form.select">Selecciona...</option>
                            <option value="Artes" data-i18n="field.arts">Artes</option>
                            <option value="Ing" data-i18n="field.engineering">IngenierÃ­a</option>
                            <option value="IT" data-i18n="field.it">IT</option>
                            <option value="Salud" data-i18n="field.health">Salud</option>
                            <option value="S.Sociales" data-i18n="field.social">Ciencias Sociales</option>
                            <option value="Empresa" data-i18n="field.business">Empresa</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.education.english">Nivel de inglÃ©s *</label>
                        <select name="nivelIngles" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="" data-i18n="form.select">Selecciona...</option>
                            <option value="BÃ¡sico" data-i18n="english.basic">BÃ¡sico</option>
                            <option value="Intermedio" data-i18n="english.intermediate">Intermedio</option>
                            <option value="Avanzado" data-i18n="english.advanced">Avanzado</option>
                            <option value="Fluido" data-i18n="english.fluent">Fluido</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.education.ranking">Ranking Universidad *</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="radio" name="universidadRanking" value="Alto" required class="mr-2">
                                <span data-i18n="ranking.high">Alto</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="universidadRanking" value="Medio" required class="mr-2">
                                <span data-i18n="ranking.medium">Medio</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="universidadRanking" value="Bajo" required class="mr-2">
                                <span data-i18n="ranking.low">Bajo</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.education.region">RegiÃ³n de estudio *</label>
                        <select name="regionEstudio" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="" data-i18n="form.select">Selecciona...</option>
                            <option value="Australia" data-i18n="region.australia">Australia</option>
                            <option value="Europa" data-i18n="region.europe">Europa</option>
                            <option value="USA" data-i18n="region.usa">USA</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="form.education.grade">Nota media (0-10) *</label>
                        <input type="number" name="notaMedia" min="0" max="10" step="0.1" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>


                    <div class="col-span-2">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <label class="flex items-center cursor-pointer group">
                                <input type="checkbox" name="practicas"
                                       class="w-5 h-5 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500 focus:ring-2 transition-all">
                                <span class="ml-3 text-sm font-medium text-gray-700 group-hover:text-blue-600 transition-colors" data-i18n="form.education.internship">
                                    âœ“ RealicÃ© prÃ¡cticas profesionales durante mi formaciÃ³n
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between mt-6">
                    <button type="button" onclick="previousStep()"
                            class="bg-gray-300 text-gray-700 px-6 py-2 rounded-lg font-semibold hover:bg-gray-400 transition-colors">
                        <span data-i18n="form.previous">Anterior</span>
                    </button>
                    <button type="button" onclick="submitForm()"
                            class="bg-green-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors">
                        <span data-i18n="form.submit">Obtener PredicciÃ³n</span>
                    </button>
                </div>
            </div>
            
        </form>
    </div>
    
    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-xl shadow-xl text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"></div>
            <p class="text-lg font-semibold" data-i18n="loading.processing">Procesando tu predicciÃ³n...</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const formId = "{{ form_id }}";
</script>
{% endblock %}
